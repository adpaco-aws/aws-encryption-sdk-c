
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/array_list.h</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef <a href="array_list.h.html#2">AWS_COMMON_ARRAY_LIST_H</a></div><div id="2" class="line none">    2 #define <a href="array_list.h.html#2">AWS_COMMON_ARRAY_LIST_H</a></div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /**</div><div id="5" class="line none">    5  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="6" class="line none">    6  * SPDX-License-Identifier: Apache-2.0.</div><div id="7" class="line none">    7  */</div><div id="8" class="line none">    8 #include &lt;aws/common/common.h&gt;</div><div id="9" class="line none">    9 #include &lt;aws/common/math.h&gt;</div><div id="10" class="line none">   10 </div><div id="11" class="line none">   11 #include &lt;stdlib.h&gt;</div><div id="12" class="line none">   12 </div><div id="13" class="line none">   13 #define <a href="array_list.h.html#13">AWS_ARRAY_LIST_DEBUG_FILL</a> 0xDD</div><div id="14" class="line none">   14 </div><div id="15" class="line none">   15 struct <a href="array_list.h.html#15">aws_array_list</a> {</div><div id="16" class="line none">   16     struct <a href="allocator.h.html#15">aws_allocator</a> *<a href="array_list.h.html#16">alloc</a>;</div><div id="17" class="line none">   17     size_t <a href="array_list.h.html#17">current_size</a>;</div><div id="18" class="line none">   18     size_t <a href="array_list.h.html#18">length</a>;</div><div id="19" class="line none">   19     size_t <a href="array_list.h.html#19">item_size</a>;</div><div id="20" class="line none">   20     void *<a href="array_list.h.html#20">data</a>;</div><div id="21" class="line none">   21 };</div><div id="22" class="line none">   22 </div><div id="23" class="line none">   23 /**</div><div id="24" class="line none">   24  * Prototype for a comparator function for sorting elements.</div><div id="25" class="line none">   25  *</div><div id="26" class="line none">   26  * a and b should be cast to pointers to the element type held in the list</div><div id="27" class="line none">   27  * before being dereferenced. The function should compare the elements and</div><div id="28" class="line none">   28  * return a positive number if a &gt; b, zero if a = b, and a negative number</div><div id="29" class="line none">   29  * if a &lt; b.</div><div id="30" class="line none">   30  */</div><div id="31" class="line none">   31 typedef int(<a href="array_list.h.html#31">aws_array_list_comparator_fn</a>)(const void *a, const void *b);</div><div id="32" class="line none">   32 </div><div id="33" class="line none">   33 AWS_EXTERN_C_BEGIN</div><div id="34" class="line none">   34 </div><div id="35" class="line none">   35 /**</div><div id="36" class="line none">   36  * Initializes an array list with an array of size initial_item_allocation * item_size. In this mode, the array size</div><div id="37" class="line none">   37  * will grow by a factor of 2 upon insertion if space is not available. initial_item_allocation is the number of</div><div id="38" class="line none">   38  * elements you want space allocated for. item_size is the size of each element in bytes. Mixing items types is not</div><div id="39" class="line none">   39  * supported by this API.</div><div id="40" class="line none">   40  */</div><div id="41" class="line none">   41 AWS_STATIC_IMPL</div><div id="42" class="line none">   42 int <a href="array_list.inl.html#18">aws_array_list_init_dynamic</a>(</div><div id="43" class="line none">   43     struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list,</div><div id="44" class="line none">   44     struct <a href="allocator.h.html#15">aws_allocator</a> *<a href="array_list.h.html#16">alloc</a>,</div><div id="45" class="line none">   45     size_t initial_item_allocation,</div><div id="46" class="line none">   46     size_t <a href="array_list.h.html#19">item_size</a>);</div><div id="47" class="line none">   47 </div><div id="48" class="line none">   48 /**</div><div id="49" class="line none">   49  * Initializes an array list with a preallocated array of void *. item_count is the number of elements in the array,</div><div id="50" class="line none">   50  * and item_size is the size in bytes of each element. Mixing items types is not supported</div><div id="51" class="line none">   51  * by this API. Once this list is full, new items will be rejected.</div><div id="52" class="line none">   52  */</div><div id="53" class="line none">   53 AWS_STATIC_IMPL</div><div id="54" class="line none">   54 void <a href="array_list.inl.html#59">aws_array_list_init_static</a>(</div><div id="55" class="line none">   55     struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list,</div><div id="56" class="line none">   56     void *raw_array,</div><div id="57" class="line none">   57     size_t item_count,</div><div id="58" class="line none">   58     size_t <a href="array_list.h.html#19">item_size</a>);</div><div id="59" class="line none">   59 </div><div id="60" class="line none">   60 /**</div><div id="61" class="line none">   61  * Set of properties of a valid aws_array_list.</div><div id="62" class="line none">   62  */</div><div id="63" class="line none">   63 AWS_STATIC_IMPL</div><div id="64" class="line none">   64 bool <a href="array_list.inl.html#82">aws_array_list_is_valid</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="65" class="line none">   65 </div><div id="66" class="line none">   66 /**</div><div id="67" class="line none">   67  * Deallocates any memory that was allocated for this list, and resets list for reuse or deletion.</div><div id="68" class="line none">   68  */</div><div id="69" class="line none">   69 AWS_STATIC_IMPL</div><div id="70" class="line none">   70 void <a href="array_list.inl.html#109">aws_array_list_clean_up</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="71" class="line none">   71 </div><div id="72" class="line none">   72 /**</div><div id="73" class="line none">   73  * Erases and then deallocates any memory that was allocated for this list, and resets list for reuse or deletion.</div><div id="74" class="line none">   74  */</div><div id="75" class="line none">   75 AWS_STATIC_IMPL</div><div id="76" class="line none">   76 void <a href="array_list.inl.html#119">aws_array_list_clean_up_secure</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="77" class="line none">   77 </div><div id="78" class="line none">   78 /**</div><div id="79" class="line none">   79  * Pushes the memory pointed to by val onto the end of internal list</div><div id="80" class="line none">   80  */</div><div id="81" class="line none">   81 AWS_STATIC_IMPL</div><div id="82" class="line none">   82 int <a href="array_list.inl.html#130">aws_array_list_push_back</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, const void *val);</div><div id="83" class="line none">   83 </div><div id="84" class="line none">   84 /**</div><div id="85" class="line none">   85  * Copies the element at the front of the list if it exists. If list is empty, AWS_ERROR_LIST_EMPTY will be raised</div><div id="86" class="line none">   86  */</div><div id="87" class="line none">   87 AWS_STATIC_IMPL</div><div id="88" class="line none">   88 int <a href="array_list.inl.html#148">aws_array_list_front</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, void *val);</div><div id="89" class="line none">   89 </div><div id="90" class="line none">   90 /**</div><div id="91" class="line none">   91  * Deletes the element at the front of the list if it exists. If list is empty, AWS_ERROR_LIST_EMPTY will be raised.</div><div id="92" class="line none">   92  * This call results in shifting all of the elements at the end of the array to the front. Avoid this call unless that</div><div id="93" class="line none">   93  * is intended behavior.</div><div id="94" class="line none">   94  */</div><div id="95" class="line none">   95 AWS_STATIC_IMPL</div><div id="96" class="line none">   96 int <a href="array_list.inl.html#165">aws_array_list_pop_front</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="97" class="line none">   97 </div><div id="98" class="line none">   98 /**</div><div id="99" class="line none">   99  * Delete N elements from the front of the list.</div><div id="100" class="line none">  100  * Remaining elements are shifted to the front of the list.</div><div id="101" class="line none">  101  * If the list has less than N elements, the list is cleared.</div><div id="102" class="line none">  102  * This call is more efficient than calling aws_array_list_pop_front() N times.</div><div id="103" class="line none">  103  */</div><div id="104" class="line none">  104 AWS_STATIC_IMPL</div><div id="105" class="line none">  105 void <a href="array_list.inl.html#178">aws_array_list_pop_front_n</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, size_t n);</div><div id="106" class="line none">  106 </div><div id="107" class="line none">  107 /**</div><div id="108" class="line none">  108  * Deletes the element this index in the list if it exists.</div><div id="109" class="line none">  109  * If element does not exist, AWS_ERROR_INVALID_INDEX will be raised.</div><div id="110" class="line none">  110  * This call results in shifting all remaining elements towards the front.</div><div id="111" class="line none">  111  * Avoid this call unless that is intended behavior.</div><div id="112" class="line none">  112  */</div><div id="113" class="line none">  113 AWS_STATIC_IMPL</div><div id="114" class="line none">  114 int <a href="array_list.inl.html#199">aws_array_list_erase</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, size_t <a href="../../../verification/cbmc/include/proof_helpers/utils.h.html#22">index</a>);</div><div id="115" class="line none">  115 </div><div id="116" class="line none">  116 /**</div><div id="117" class="line none">  117  * Copies the element at the end of the list if it exists. If list is empty, AWS_ERROR_LIST_EMPTY will be raised.</div><div id="118" class="line none">  118  */</div><div id="119" class="line none">  119 AWS_STATIC_IMPL</div><div id="120" class="line none">  120 int <a href="array_list.inl.html#231">aws_array_list_back</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, void *val);</div><div id="121" class="line none">  121 </div><div id="122" class="line none">  122 /**</div><div id="123" class="line none">  123  * Deletes the element at the end of the list if it exists. If list is empty, AWS_ERROR_LIST_EMPTY will be raised.</div><div id="124" class="line none">  124  */</div><div id="125" class="line none">  125 AWS_STATIC_IMPL</div><div id="126" class="line none">  126 int <a href="array_list.inl.html#249">aws_array_list_pop_back</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="127" class="line none">  127 </div><div id="128" class="line none">  128 /**</div><div id="129" class="line none">  129  * Clears all elements in the array and resets length to zero. Size does not change in this operation.</div><div id="130" class="line none">  130  */</div><div id="131" class="line none">  131 AWS_STATIC_IMPL</div><div id="132" class="line none">  132 void <a href="array_list.inl.html#268">aws_array_list_clear</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="133" class="line none">  133 </div><div id="134" class="line none">  134 /**</div><div id="135" class="line none">  135  * If in dynamic mode, shrinks the allocated array size to the minimum amount necessary to store its elements.</div><div id="136" class="line none">  136  */</div><div id="137" class="line none">  137 AWS_COMMON_API</div><div id="138" class="line none">  138 int aws_array_list_shrink_to_fit(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="139" class="line none">  139 </div><div id="140" class="line none">  140 /**</div><div id="141" class="line none">  141  * Copies the elements from from to to. If to is in static mode, it must at least be the same length as from. Any data</div><div id="142" class="line none">  142  * in to will be overwritten in this copy.</div><div id="143" class="line none">  143  */</div><div id="144" class="line none">  144 AWS_COMMON_API</div><div id="145" class="line none">  145 int aws_array_list_copy(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT <a href="../../../../sources/openssl/evp_override.c.html#412">from</a>, struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT to);</div><div id="146" class="line none">  146 </div><div id="147" class="line none">  147 /**</div><div id="148" class="line none">  148  * Swap contents between two dynamic lists. Both lists must use the same allocator.</div><div id="149" class="line none">  149  */</div><div id="150" class="line none">  150 AWS_STATIC_IMPL</div><div id="151" class="line none">  151 void <a href="array_list.inl.html#280">aws_array_list_swap_contents</a>(</div><div id="152" class="line none">  152     struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list_a,</div><div id="153" class="line none">  153     struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list_b);</div><div id="154" class="line none">  154 </div><div id="155" class="line none">  155 /**</div><div id="156" class="line none">  156  * Returns the number of elements that can fit in the internal array. If list is initialized in dynamic mode,</div><div id="157" class="line none">  157  * the capacity changes over time.</div><div id="158" class="line none">  158  */</div><div id="159" class="line none">  159 AWS_STATIC_IMPL</div><div id="160" class="line none">  160 size_t <a href="array_list.inl.html#298">aws_array_list_capacity</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="161" class="line none">  161 </div><div id="162" class="line none">  162 /**</div><div id="163" class="line none">  163  * Returns the number of elements in the internal array.</div><div id="164" class="line none">  164  */</div><div id="165" class="line none">  165 AWS_STATIC_IMPL</div><div id="166" class="line none">  166 size_t <a href="array_list.inl.html#307">aws_array_list_length</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list);</div><div id="167" class="line none">  167 </div><div id="168" class="line none">  168 /**</div><div id="169" class="line none">  169  * Copies the memory at index to val. If element does not exist, AWS_ERROR_INVALID_INDEX will be raised.</div><div id="170" class="line none">  170  */</div><div id="171" class="line none">  171 AWS_STATIC_IMPL</div><div id="172" class="line none">  172 int <a href="array_list.inl.html#320">aws_array_list_get_at</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, void *val, size_t <a href="../../../verification/cbmc/include/proof_helpers/utils.h.html#22">index</a>);</div><div id="173" class="line none">  173 </div><div id="174" class="line none">  174 /**</div><div id="175" class="line none">  175  * Copies the memory address of the element at index to *val. If element does not exist, AWS_ERROR_INVALID_INDEX will be</div><div id="176" class="line none">  176  * raised.</div><div id="177" class="line none">  177  */</div><div id="178" class="line none">  178 AWS_STATIC_IMPL</div><div id="179" class="line none">  179 int <a href="array_list.inl.html#335">aws_array_list_get_at_ptr</a>(const struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, void **val, size_t <a href="../../../verification/cbmc/include/proof_helpers/utils.h.html#22">index</a>);</div><div id="180" class="line none">  180 </div><div id="181" class="line none">  181 /**</div><div id="182" class="line none">  182  * Ensures that the array list has enough capacity to store a value at the specified index. If there is not already</div><div id="183" class="line none">  183  * enough capacity, and the list is in dynamic mode, this function will attempt to allocate more memory, expanding the</div><div id="184" class="line none">  184  * list. In static mode, if 'index' is beyond the maximum index, AWS_ERROR_INVALID_INDEX will be raised.</div><div id="185" class="line none">  185  */</div><div id="186" class="line none">  186 AWS_COMMON_API</div><div id="187" class="line none">  187 int <a href="array_list.h.html#187">aws_array_list_ensure_capacity</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, size_t <a href="../../../verification/cbmc/include/proof_helpers/utils.h.html#22">index</a>);</div><div id="188" class="line none">  188 </div><div id="189" class="line none">  189 /**</div><div id="190" class="line none">  190  * Copies the the memory pointed to by val into the array at index. If in dynamic mode, the size will grow by a factor</div><div id="191" class="line none">  191  * of two when the array is full. In static mode, AWS_ERROR_INVALID_INDEX will be raised if the index is past the bounds</div><div id="192" class="line none">  192  * of the array.</div><div id="193" class="line none">  193  */</div><div id="194" class="line none">  194 AWS_STATIC_IMPL</div><div id="195" class="line none">  195 int <a href="array_list.inl.html#348">aws_array_list_set_at</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, const void *val, size_t <a href="../../../verification/cbmc/include/proof_helpers/utils.h.html#22">index</a>);</div><div id="196" class="line none">  196 </div><div id="197" class="line none">  197 /**</div><div id="198" class="line none">  198  * Swap elements at the specified indices, which must be within the bounds of the array.</div><div id="199" class="line none">  199  */</div><div id="200" class="line none">  200 AWS_COMMON_API</div><div id="201" class="line none">  201 void aws_array_list_swap(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, size_t a, size_t b);</div><div id="202" class="line none">  202 </div><div id="203" class="line none">  203 /**</div><div id="204" class="line none">  204  * Sort elements in the list in-place according to the comparator function.</div><div id="205" class="line none">  205  */</div><div id="206" class="line none">  206 AWS_STATIC_IMPL</div><div id="207" class="line none">  207 void <a href="array_list.inl.html#379">aws_array_list_sort</a>(struct <a href="array_list.h.html#15">aws_array_list</a> *AWS_RESTRICT list, <a href="array_list.h.html#31">aws_array_list_comparator_fn</a> *compare_fn);</div><div id="208" class="line none">  208 </div><div id="209" class="line none">  209 #ifndef AWS_NO_STATIC_IMPL</div><div id="210" class="line none">  210 #    include &lt;aws/common/array_list.inl&gt;</div><div id="211" class="line none">  211 #endif /* AWS_NO_STATIC_IMPL */</div><div id="212" class="line none">  212 </div><div id="213" class="line none">  213 AWS_EXTERN_C_END</div><div id="214" class="line none">  214 </div><div id="215" class="line none">  215 #endif /* AWS_COMMON_ARRAY_LIST_H */</div>
</div>
</body>
</html>
