
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/encoding.h</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef <a href="encoding.h.html#2">AWS_COMMON_ENCODING_H</a></div><div id="2" class="line none">    2 #define <a href="encoding.h.html#2">AWS_COMMON_ENCODING_H</a></div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /**</div><div id="5" class="line none">    5  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="6" class="line none">    6  * SPDX-License-Identifier: Apache-2.0.</div><div id="7" class="line none">    7  */</div><div id="8" class="line none">    8 </div><div id="9" class="line none">    9 #include &lt;aws/common/byte_buf.h&gt;</div><div id="10" class="line none">   10 #include &lt;aws/common/byte_order.h&gt;</div><div id="11" class="line none">   11 #include &lt;aws/common/common.h&gt;</div><div id="12" class="line none">   12 </div><div id="13" class="line none">   13 #include &lt;memory.h&gt;</div><div id="14" class="line none">   14 </div><div id="15" class="line none">   15 AWS_EXTERN_C_BEGIN</div><div id="16" class="line none">   16 </div><div id="17" class="line none">   17 /*</div><div id="18" class="line none">   18  * computes the length necessary to store the result of aws_hex_encode().</div><div id="19" class="line none">   19  * returns -1 on failure, and 0 on success. encoded_length will be set on</div><div id="20" class="line none">   20  * success.</div><div id="21" class="line none">   21  */</div><div id="22" class="line none">   22 AWS_COMMON_API</div><div id="23" class="line none">   23 int aws_hex_compute_encoded_len(size_t to_encode_len, size_t *encoded_length);</div><div id="24" class="line none">   24 </div><div id="25" class="line none">   25 /*</div><div id="26" class="line none">   26  * Base 16 (hex) encodes the contents of to_encode and stores the result in</div><div id="27" class="line none">   27  * output.  0 terminates the result.  Assumes the buffer is empty and does not resize on</div><div id="28" class="line none">   28  * insufficient capacity.</div><div id="29" class="line none">   29  */</div><div id="30" class="line none">   30 AWS_COMMON_API</div><div id="31" class="line none">   31 int aws_hex_encode(const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_encode, struct <a href="byte_buf.h.html#25">aws_byte_buf</a> *AWS_RESTRICT output);</div><div id="32" class="line none">   32 </div><div id="33" class="line none">   33 /*</div><div id="34" class="line none">   34  * Base 16 (hex) encodes the contents of to_encode and appends the result in</div><div id="35" class="line none">   35  * output.  Does not 0-terminate.  Grows the destination buffer dynamically if necessary.</div><div id="36" class="line none">   36  */</div><div id="37" class="line none">   37 AWS_COMMON_API</div><div id="38" class="line none">   38 int aws_hex_encode_append_dynamic(</div><div id="39" class="line none">   39     const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_encode,</div><div id="40" class="line none">   40     struct <a href="byte_buf.h.html#25">aws_byte_buf</a> *AWS_RESTRICT output);</div><div id="41" class="line none">   41 </div><div id="42" class="line none">   42 /*</div><div id="43" class="line none">   43  * computes the length necessary to store the result of aws_hex_decode().</div><div id="44" class="line none">   44  * returns -1 on failure, and 0 on success. decoded_len will be set on success.</div><div id="45" class="line none">   45  */</div><div id="46" class="line none">   46 AWS_COMMON_API</div><div id="47" class="line none">   47 int aws_hex_compute_decoded_len(size_t to_decode_len, size_t *decoded_len);</div><div id="48" class="line none">   48 </div><div id="49" class="line none">   49 /*</div><div id="50" class="line none">   50  * Base 16 (hex) decodes the contents of to_decode and stores the result in</div><div id="51" class="line none">   51  * output. If output is NULL, output_size will be set to what the output_size</div><div id="52" class="line none">   52  * should be.</div><div id="53" class="line none">   53  */</div><div id="54" class="line none">   54 AWS_COMMON_API</div><div id="55" class="line none">   55 int aws_hex_decode(const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_decode, struct <a href="byte_buf.h.html#25">aws_byte_buf</a> *AWS_RESTRICT output);</div><div id="56" class="line none">   56 </div><div id="57" class="line none">   57 /*</div><div id="58" class="line none">   58  * Computes the length necessary to store the output of aws_base64_encode call.</div><div id="59" class="line none">   59  * returns -1 on failure, and 0 on success. encoded_length will be set on</div><div id="60" class="line none">   60  * success.</div><div id="61" class="line none">   61  */</div><div id="62" class="line none">   62 AWS_COMMON_API</div><div id="63" class="line none">   63 int <a href="encoding.h.html#63">aws_base64_compute_encoded_len</a>(size_t to_encode_len, size_t *encoded_len);</div><div id="64" class="line none">   64 </div><div id="65" class="line none">   65 /*</div><div id="66" class="line none">   66  * Base 64 encodes the contents of to_encode and stores the result in output.</div><div id="67" class="line none">   67  */</div><div id="68" class="line none">   68 AWS_COMMON_API</div><div id="69" class="line none">   69 int <a href="encoding.h.html#69">aws_base64_encode</a>(const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_encode, struct <a href="byte_buf.h.html#25">aws_byte_buf</a> *AWS_RESTRICT output);</div><div id="70" class="line none">   70 </div><div id="71" class="line none">   71 /*</div><div id="72" class="line none">   72  * Computes the length necessary to store the output of aws_base64_decode call.</div><div id="73" class="line none">   73  * returns -1 on failure, and 0 on success. decoded_len will be set on success.</div><div id="74" class="line none">   74  */</div><div id="75" class="line none">   75 AWS_COMMON_API</div><div id="76" class="line none">   76 int aws_base64_compute_decoded_len(const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_decode, size_t *decoded_len);</div><div id="77" class="line none">   77 </div><div id="78" class="line none">   78 /*</div><div id="79" class="line none">   79  * Base 64 decodes the contents of to_decode and stores the result in output.</div><div id="80" class="line none">   80  */</div><div id="81" class="line none">   81 AWS_COMMON_API</div><div id="82" class="line none">   82 int <a href="encoding.h.html#82">aws_base64_decode</a>(const struct <a href="byte_buf.h.html#38">aws_byte_cursor</a> *AWS_RESTRICT to_decode, struct <a href="byte_buf.h.html#25">aws_byte_buf</a> *AWS_RESTRICT output);</div><div id="83" class="line none">   83 </div><div id="84" class="line none">   84 /* Add a 64 bit unsigned integer to the buffer, ensuring network - byte order</div><div id="85" class="line none">   85  * Assumes the buffer size is at least 8 bytes.</div><div id="86" class="line none">   86  */</div><div id="87" class="line none">   87 AWS_STATIC_IMPL void <a href="encoding.inl.html#19">aws_write_u64</a>(uint64_t <a href="atomics.h.html#17">value</a>, uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="88" class="line none">   88 </div><div id="89" class="line none">   89 /*</div><div id="90" class="line none">   90  * Extracts a 64 bit unsigned integer from buffer. Ensures conversion from</div><div id="91" class="line none">   91  * network byte order to host byte order. Assumes buffer size is at least 8</div><div id="92" class="line none">   92  * bytes.</div><div id="93" class="line none">   93  */</div><div id="94" class="line none">   94 AWS_STATIC_IMPL uint64_t <a href="encoding.inl.html#30">aws_read_u64</a>(const uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="95" class="line none">   95 </div><div id="96" class="line none">   96 /* Add a 32 bit unsigned integer to the buffer, ensuring network - byte order</div><div id="97" class="line none">   97  * Assumes the buffer size is at least 4 bytes.</div><div id="98" class="line none">   98  */</div><div id="99" class="line none">   99 AWS_STATIC_IMPL void <a href="encoding.inl.html#40">aws_write_u32</a>(uint32_t <a href="atomics.h.html#17">value</a>, uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="100" class="line none">  100 </div><div id="101" class="line none">  101 /*</div><div id="102" class="line none">  102  * Extracts a 32 bit unsigned integer from buffer. Ensures conversion from</div><div id="103" class="line none">  103  * network byte order to host byte order. Assumes the buffer size is at least 4</div><div id="104" class="line none">  104  * bytes.</div><div id="105" class="line none">  105  */</div><div id="106" class="line none">  106 AWS_STATIC_IMPL uint32_t <a href="encoding.inl.html#51">aws_read_u32</a>(const uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="107" class="line none">  107 </div><div id="108" class="line none">  108 /* Add a 24 bit unsigned integer to the buffer, ensuring network - byte order</div><div id="109" class="line none">  109  * return the new position in the buffer for the next operation.</div><div id="110" class="line none">  110  * Note, since this uses uint32_t for storage, the 3 least significant bytes</div><div id="111" class="line none">  111  * will be used. Assumes buffer is at least 3 bytes long.</div><div id="112" class="line none">  112  */</div><div id="113" class="line none">  113 AWS_STATIC_IMPL void <a href="encoding.inl.html#63">aws_write_u24</a>(uint32_t <a href="atomics.h.html#17">value</a>, uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="114" class="line none">  114 /*</div><div id="115" class="line none">  115  * Extracts a 24 bit unsigned integer from buffer. Ensures conversion from</div><div id="116" class="line none">  116  * network byte order to host byte order. Assumes buffer is at least 3 bytes</div><div id="117" class="line none">  117  * long.</div><div id="118" class="line none">  118  */</div><div id="119" class="line none">  119 AWS_STATIC_IMPL uint32_t <a href="encoding.inl.html#73">aws_read_u24</a>(const uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="120" class="line none">  120 </div><div id="121" class="line none">  121 /* Add a 16 bit unsigned integer to the buffer, ensuring network-byte order</div><div id="122" class="line none">  122  * return the new position in the buffer for the next operation.</div><div id="123" class="line none">  123  * Assumes buffer is at least 2 bytes long.</div><div id="124" class="line none">  124  */</div><div id="125" class="line none">  125 AWS_STATIC_IMPL void <a href="encoding.inl.html#84">aws_write_u16</a>(uint16_t <a href="atomics.h.html#17">value</a>, uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="126" class="line none">  126 /*</div><div id="127" class="line none">  127  * Extracts a 16 bit unsigned integer from buffer. Ensures conversion from</div><div id="128" class="line none">  128  * network byte order to host byte order. Assumes buffer is at least 2 bytes</div><div id="129" class="line none">  129  * long.</div><div id="130" class="line none">  130  */</div><div id="131" class="line none">  131 AWS_STATIC_IMPL uint16_t <a href="encoding.inl.html#95">aws_read_u16</a>(const uint8_t *<a href="byte_buf.h.html#28">buffer</a>);</div><div id="132" class="line none">  132 </div><div id="133" class="line none">  133 enum <a href="encoding.h.html#133">aws_text_encoding</a> {</div><div id="134" class="line none">  134     <a href="encoding.h.html#134">AWS_TEXT_UNKNOWN</a>,</div><div id="135" class="line none">  135     <a href="encoding.h.html#135">AWS_TEXT_UTF8</a>,</div><div id="136" class="line none">  136     <a href="encoding.h.html#136">AWS_TEXT_UTF16</a>,</div><div id="137" class="line none">  137     <a href="encoding.h.html#137">AWS_TEXT_UTF32</a>,</div><div id="138" class="line none">  138     <a href="encoding.h.html#138">AWS_TEXT_ASCII</a>,</div><div id="139" class="line none">  139 };</div><div id="140" class="line none">  140 </div><div id="141" class="line none">  141 /* Checks the BOM in the buffer to see if encoding can be determined. If there is no BOM or</div><div id="142" class="line none">  142  * it is unrecognizable, then AWS_TEXT_UNKNOWN will be returned.</div><div id="143" class="line none">  143  */</div><div id="144" class="line none">  144 AWS_STATIC_IMPL enum <a href="encoding.h.html#133">aws_text_encoding</a> <a href="encoding.inl.html#103">aws_text_detect_encoding</a>(const uint8_t *<a href="string.h.html#45">bytes</a>, size_t <a href="private/hash_table_impl.h.html#35">size</a>);</div><div id="145" class="line none">  145 </div><div id="146" class="line none">  146 /*</div><div id="147" class="line none">  147  * Returns true if the supplied bytes are encoded as UTF8 or ASCII.</div><div id="148" class="line none">  148  */</div><div id="149" class="line none">  149 AWS_STATIC_IMPL bool <a href="encoding.inl.html#135">aws_text_is_utf8</a>(const uint8_t *<a href="string.h.html#45">bytes</a>, size_t <a href="private/hash_table_impl.h.html#35">size</a>);</div><div id="150" class="line none">  150 </div><div id="151" class="line none">  151 #ifndef AWS_NO_STATIC_IMPL</div><div id="152" class="line none">  152 #    include &lt;aws/common/encoding.inl&gt;</div><div id="153" class="line none">  153 #endif /* AWS_NO_STATIC_IMPL */</div><div id="154" class="line none">  154 </div><div id="155" class="line none">  155 AWS_EXTERN_C_END</div><div id="156" class="line none">  156 </div><div id="157" class="line none">  157 #endif /* AWS_COMMON_ENCODING_H */</div>
</div>
</body>
</html>
