
<html>
<head>
<title>verification/cbmc/aws-c-common/verification/cbmc/sources/proof_allocators.c</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /**</div><div id="2" class="line none">    2  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="3" class="line none">    3  * SPDX-License-Identifier: Apache-2.0.</div><div id="4" class="line none">    4  */</div><div id="5" class="line none">    5 </div><div id="6" class="line none">    6 #include &lt;aws/common/math.h&gt;</div><div id="7" class="line none">    7 #include &lt;proof_helpers/proof_allocators.h&gt;</div><div id="8" class="line none">    8 #include &lt;stdarg.h&gt;</div><div id="9" class="line none">    9 #include &lt;stdlib.h&gt;</div><div id="10" class="line none">   10 </div><div id="11" class="line none">   11 /**</div><div id="12" class="line none">   12  * Use the can_fail_calloc() defined above to specalize allocation for finding bugs</div><div id="13" class="line none">   13  * using CBMC</div><div id="14" class="line none">   14  */</div><div id="15" class="line none">   15 static void *<a href="proof_allocators.c.html#15">s_can_fail_calloc_allocator</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, size_t num, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="16" class="line none">   16     (void)<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>;</div><div id="17" class="line none">   17     return <a href="proof_allocators.c.html#72">can_fail_calloc</a>(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="18" class="line none">   18 }</div><div id="19" class="line none">   19 </div><div id="20" class="line none">   20 /**</div><div id="21" class="line none">   21  * Use the can_fail_malloc() defined above to specalize allocation for finding bugs</div><div id="22" class="line none">   22  * using CBMC</div><div id="23" class="line none">   23  */</div><div id="24" class="line none">   24 static void *<a href="proof_allocators.c.html#24">s_can_fail_malloc_allocator</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="25" class="line none">   25     (void)<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>;</div><div id="26" class="line none">   26     return <a href="proof_allocators.c.html#76">can_fail_malloc</a>(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="27" class="line none">   27 }</div><div id="28" class="line none">   28 </div><div id="29" class="line none">   29 /**</div><div id="30" class="line none">   30  * Since we always allocate with "malloc()", just free with "free()"</div><div id="31" class="line none">   31  */</div><div id="32" class="line none">   32 static void <a href="proof_allocators.c.html#32">s_can_fail_free_allocator</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, void *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>) {</div><div id="33" class="line missed">   33     (void)<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>;</div><div id="34" class="line missed">   34     free(<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>);</div><div id="35" class="line missed">   35 }</div><div id="36" class="line none">   36 </div><div id="37" class="line none">   37 /**</div><div id="38" class="line none">   38  * Use the can_fail_realloc() defined above to specalize allocation for finding bugs</div><div id="39" class="line none">   39  * using CBMC</div><div id="40" class="line none">   40  */</div><div id="41" class="line none">   41 static void *<a href="proof_allocators.c.html#41">s_can_fail_realloc_allocator</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, void *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, size_t oldsize, size_t newsize) {</div><div id="42" class="line none">   42     (void)<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>;</div><div id="43" class="line none">   43     (void)oldsize;</div><div id="44" class="line none">   44     return <a href="proof_allocators.c.html#90">can_fail_realloc</a>(<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, newsize);</div><div id="45" class="line none">   45 }</div><div id="46" class="line none">   46 </div><div id="47" class="line none">   47 static struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> <a href="proof_allocators.c.html#47">s_can_fail_allocator_static</a> = {</div><div id="48" class="line none">   48     .<a href="../../../include/aws/common/allocator.h.html#16">mem_acquire</a> = <a href="proof_allocators.c.html#24">s_can_fail_malloc_allocator</a>,</div><div id="49" class="line none">   49     .<a href="../../../include/aws/common/allocator.h.html#17">mem_release</a> = <a href="proof_allocators.c.html#32">s_can_fail_free_allocator</a>,</div><div id="50" class="line none">   50     .<a href="../../../include/aws/common/allocator.h.html#19">mem_realloc</a> = <a href="proof_allocators.c.html#41">s_can_fail_realloc_allocator</a>,</div><div id="51" class="line none">   51     .<a href="../../../include/aws/common/allocator.h.html#21">mem_calloc</a> = <a href="proof_allocators.c.html#15">s_can_fail_calloc_allocator</a>,</div><div id="52" class="line none">   52 };</div><div id="53" class="line none">   53 </div><div id="54" class="line none">   54 void *<a href="proof_allocators.c.html#54">bounded_calloc</a>(size_t num, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="55" class="line none">   55     size_t required_bytes;</div><div id="56" class="line none">   56     __CPROVER_assume(<a href="../../../include/aws/common/math.inl.html#99">aws_mul_size_checked</a>(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>, &amp;required_bytes) == <a href="../../../include/aws/common/error.h.html#15">AWS_OP_SUCCESS</a>);</div><div id="57" class="line none">   57     __CPROVER_assume(required_bytes &lt;= MAX_MALLOC);</div><div id="58" class="line none">   58     __CPROVER_assume(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a> != 0);</div><div id="59" class="line none">   59     return calloc(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="60" class="line none">   60 }</div><div id="61" class="line none">   61 </div><div id="62" class="line none">   62 void *<a href="proof_allocators.c.html#62">bounded_malloc</a>(size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="63" class="line hit">   63     __CPROVER_assume(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a> &lt;= MAX_MALLOC);</div><div id="64" class="line hit">   64     __CPROVER_assume(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a> != 0);</div><div id="65" class="line hit">   65     return malloc(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="66" class="line hit">   66 }</div><div id="67" class="line none">   67 </div><div id="68" class="line none">   68 struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="proof_allocators.c.html#68">can_fail_allocator</a>() {</div><div id="69" class="line hit">   69     return &amp;<a href="proof_allocators.c.html#47">s_can_fail_allocator_static</a>;</div><div id="70" class="line hit">   70 }</div><div id="71" class="line none">   71 </div><div id="72" class="line none">   72 void *<a href="proof_allocators.c.html#72">can_fail_calloc</a>(size_t num, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="73" class="line none">   73     return <a href="../include/proof_helpers/nondet.h.html#15">nondet_bool</a>() ? NULL : <a href="proof_allocators.c.html#54">bounded_calloc</a>(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="74" class="line none">   74 }</div><div id="75" class="line none">   75 </div><div id="76" class="line none">   76 void *<a href="proof_allocators.c.html#76">can_fail_malloc</a>(size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="77" class="line hit">   77     return <a href="../include/proof_helpers/nondet.h.html#15">nondet_bool</a>() ? NULL : <a href="proof_allocators.c.html#62">bounded_malloc</a>(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="78" class="line hit">   78 }</div><div id="79" class="line none">   79 </div><div id="80" class="line none">   80 /**</div><div id="81" class="line none">   81  * https://en.cppreference.com/w/c/memory/realloc</div><div id="82" class="line none">   82  * If there is not enough memory, the old memory block is not freed and null pointer is returned.</div><div id="83" class="line none">   83  *</div><div id="84" class="line none">   84  * If ptr is NULL, the behavior is the same as calling malloc(new_size).</div><div id="85" class="line none">   85  *</div><div id="86" class="line none">   86  * If new_size is zero, the behavior is implementation defined (null pointer may be returned (in which case the old</div><div id="87" class="line none">   87  * memory block may or may not be freed), or some non-null pointer may be returned that may not be used to access</div><div id="88" class="line none">   88  * storage).</div><div id="89" class="line none">   89  */</div><div id="90" class="line none">   90 void *<a href="proof_allocators.c.html#90">can_fail_realloc</a>(void *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, size_t newsize) {</div><div id="91" class="line none">   91     if (newsize &gt; MAX_MALLOC) {</div><div id="92" class="line none">   92         return NULL;</div><div id="93" class="line none">   93     }</div><div id="94" class="line none">   94     if (newsize == 0) {</div><div id="95" class="line none">   95         if (<a href="../include/proof_helpers/nondet.h.html#15">nondet_bool</a>()) {</div><div id="96" class="line none">   96             free(<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>);</div><div id="97" class="line none">   97         }</div><div id="98" class="line none">   98         return <a href="../include/proof_helpers/nondet.h.html#22">nondet_voidp</a>();</div><div id="99" class="line none">   99     }</div><div id="100" class="line none">  100     return realloc(<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, newsize);</div><div id="101" class="line none">  101 }</div><div id="102" class="line none">  102 </div><div id="103" class="line none">  103 /************************************************************************************************************</div><div id="104" class="line none">  104  * Overrides for allocator.c - for use in CBMC proofs.</div><div id="105" class="line none">  105  * These assert that the allocator is can_fail_allocator, and then do the allocations without using</div><div id="106" class="line none">  106  * function pointers. (Function pointers make CBMC slow).</div><div id="107" class="line none">  107  */</div><div id="108" class="line none">  108 </div><div id="109" class="line none">  109 /**</div><div id="110" class="line none">  110  * This assert will fail if code ever uses a different allocator than expected during a proof</div><div id="111" class="line none">  111  */</div><div id="112" class="line none">  112 bool <a href="proof_allocators.c.html#112">aws_allocator_is_valid</a>(const struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/array_list.h.html#16">alloc</a>) {</div><div id="113" class="line none">  113     return <a href="../../../include/aws/common/array_list.h.html#16">alloc</a> == <a href="proof_allocators.c.html#68">can_fail_allocator</a>();</div><div id="114" class="line none">  114 }</div><div id="115" class="line none">  115 </div><div id="116" class="line none">  116 void *<a href="proof_allocators.c.html#116">aws_mem_acquire</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="117" class="line none">  117     AWS_FATAL_PRECONDITION(<a href="proof_allocators.c.html#112">aws_allocator_is_valid</a>(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>));</div><div id="118" class="line none">  118     /* Protect against https://wiki.sei.cmu.edu/confluence/display/c/MEM04-C.+Beware+of+zero-length+allocations */</div><div id="119" class="line none">  119     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a> != 0);</div><div id="120" class="line none">  120 </div><div id="121" class="line none">  121     void *mem = <a href="proof_allocators.c.html#76">can_fail_malloc</a>(<a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="122" class="line none">  122     if (!mem) {</div><div id="123" class="line none">  123         <a href="../../../include/aws/common/error.inl.html#17">aws_raise_error</a>(<a href="../../../include/aws/common/error.h.html#145">AWS_ERROR_OOM</a>);</div><div id="124" class="line none">  124     }</div><div id="125" class="line none">  125     return mem;</div><div id="126" class="line none">  126 }</div><div id="127" class="line none">  127 </div><div id="128" class="line none">  128 void *<a href="proof_allocators.c.html#128">aws_mem_calloc</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, size_t num, size_t <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>) {</div><div id="129" class="line none">  129     AWS_FATAL_PRECONDITION(<a href="proof_allocators.c.html#112">aws_allocator_is_valid</a>(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>));</div><div id="130" class="line none">  130     /* Protect against https://wiki.sei.cmu.edu/confluence/display/c/MEM04-C.+Beware+of+zero-length+allocations */</div><div id="131" class="line none">  131     AWS_FATAL_PRECONDITION(num != 0 &amp;&amp; <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a> != 0);</div><div id="132" class="line none">  132 </div><div id="133" class="line none">  133     /* Defensive check: never use calloc with size * num that would overflow</div><div id="134" class="line none">  134      * https://wiki.sei.cmu.edu/confluence/display/c/MEM07-C.+Ensure+that+the+arguments+to+calloc%28%29%2C+when+multiplied%2C+do+not+wrap</div><div id="135" class="line none">  135      */</div><div id="136" class="line none">  136     size_t required_bytes;</div><div id="137" class="line none">  137     if (<a href="../../../include/aws/common/math.inl.html#99">aws_mul_size_checked</a>(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>, &amp;required_bytes)) {</div><div id="138" class="line none">  138         return NULL;</div><div id="139" class="line none">  139     }</div><div id="140" class="line none">  140 </div><div id="141" class="line none">  141     void *mem = <a href="proof_allocators.c.html#72">can_fail_calloc</a>(num, <a href="../../../include/aws/common/private/hash_table_impl.h.html#35">size</a>);</div><div id="142" class="line none">  142     if (!mem) {</div><div id="143" class="line none">  143         <a href="../../../include/aws/common/error.inl.html#17">aws_raise_error</a>(<a href="../../../include/aws/common/error.h.html#145">AWS_ERROR_OOM</a>);</div><div id="144" class="line none">  144     }</div><div id="145" class="line none">  145     return mem;</div><div id="146" class="line none">  146 }</div><div id="147" class="line none">  147 </div><div id="148" class="line none">  148 #define <a href="proof_allocators.c.html#148">AWS_ALIGN_ROUND_UP</a>(<a href="../../../include/aws/common/atomics.h.html#17">value</a>, alignment) (((<a href="../../../include/aws/common/atomics.h.html#17">value</a>) + ((alignment)-1)) &amp; ~((alignment)-1))</div><div id="149" class="line none">  149 </div><div id="150" class="line none">  150 void *<a href="proof_allocators.c.html#150">aws_mem_acquire_many</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, size_t <a href="../../../include/aws/common/error.h.html#34">count</a>, ...) {</div><div id="151" class="line none">  151 </div><div id="152" class="line none">  152     enum { S_ALIGNMENT = sizeof(intmax_t) };</div><div id="153" class="line none">  153 </div><div id="154" class="line none">  154     va_list args_size;</div><div id="155" class="line none">  155     va_start(args_size, <a href="../../../include/aws/common/error.h.html#34">count</a>);</div><div id="156" class="line none">  156     va_list args_allocs;</div><div id="157" class="line none">  157     va_copy(args_allocs, args_size);</div><div id="158" class="line none">  158 </div><div id="159" class="line none">  159     size_t total_size = 0;</div><div id="160" class="line none">  160     for (size_t i = 0; i &lt; <a href="../../../include/aws/common/error.h.html#34">count</a>; ++i) {</div><div id="161" class="line none">  161 </div><div id="162" class="line none">  162         /* Ignore the pointer argument for now */</div><div id="163" class="line none">  163         va_arg(args_size, void **);</div><div id="164" class="line none">  164 </div><div id="165" class="line none">  165         size_t alloc_size = va_arg(args_size, size_t);</div><div id="166" class="line none">  166         total_size += <a href="proof_allocators.c.html#148">AWS_ALIGN_ROUND_UP</a>(alloc_size, S_ALIGNMENT);</div><div id="167" class="line none">  167     }</div><div id="168" class="line none">  168     va_end(args_size);</div><div id="169" class="line none">  169 </div><div id="170" class="line none">  170     void *<a href="../../../include/aws/common/ring_buffer.h.html#20">allocation</a> = NULL;</div><div id="171" class="line none">  171 </div><div id="172" class="line none">  172     if (total_size &gt; 0) {</div><div id="173" class="line none">  173 </div><div id="174" class="line none">  174         <a href="../../../include/aws/common/ring_buffer.h.html#20">allocation</a> = <a href="proof_allocators.c.html#76">can_fail_malloc</a>(total_size);</div><div id="175" class="line none">  175         if (!<a href="../../../include/aws/common/ring_buffer.h.html#20">allocation</a>) {</div><div id="176" class="line none">  176             <a href="../../../include/aws/common/error.inl.html#17">aws_raise_error</a>(<a href="../../../include/aws/common/error.h.html#145">AWS_ERROR_OOM</a>);</div><div id="177" class="line none">  177             goto cleanup;</div><div id="178" class="line none">  178         }</div><div id="179" class="line none">  179 </div><div id="180" class="line none">  180         uint8_t *current_ptr = <a href="../../../include/aws/common/ring_buffer.h.html#20">allocation</a>;</div><div id="181" class="line none">  181 </div><div id="182" class="line none">  182         for (size_t i = 0; i &lt; <a href="../../../include/aws/common/error.h.html#34">count</a>; ++i) {</div><div id="183" class="line none">  183 </div><div id="184" class="line none">  184             void **out_ptr = va_arg(args_allocs, void **);</div><div id="185" class="line none">  185 </div><div id="186" class="line none">  186             size_t alloc_size = va_arg(args_allocs, size_t);</div><div id="187" class="line none">  187             alloc_size = <a href="proof_allocators.c.html#148">AWS_ALIGN_ROUND_UP</a>(alloc_size, S_ALIGNMENT);</div><div id="188" class="line none">  188 </div><div id="189" class="line none">  189             *out_ptr = current_ptr;</div><div id="190" class="line none">  190             current_ptr += alloc_size;</div><div id="191" class="line none">  191         }</div><div id="192" class="line none">  192     }</div><div id="193" class="line none">  193 </div><div id="194" class="line none">  194 cleanup:</div><div id="195" class="line none">  195     va_end(args_allocs);</div><div id="196" class="line none">  196     return <a href="../../../include/aws/common/ring_buffer.h.html#20">allocation</a>;</div><div id="197" class="line none">  197 }</div><div id="198" class="line none">  198 </div><div id="199" class="line none">  199 #undef <a href="proof_allocators.c.html#148">AWS_ALIGN_ROUND_UP</a></div><div id="200" class="line none">  200 </div><div id="201" class="line none">  201 void <a href="proof_allocators.c.html#201">aws_mem_release</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, void *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>) {</div><div id="202" class="line none">  202     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a> != NULL);</div><div id="203" class="line none">  203     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>-&gt;<a href="../../../include/aws/common/allocator.h.html#17">mem_release</a> != NULL);</div><div id="204" class="line none">  204 </div><div id="205" class="line none">  205     if (<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a> != NULL) {</div><div id="206" class="line none">  206         free(<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>);</div><div id="207" class="line none">  207     }</div><div id="208" class="line none">  208 }</div><div id="209" class="line none">  209 </div><div id="210" class="line none">  210 int <a href="proof_allocators.c.html#210">aws_mem_realloc</a>(struct <a href="../../../include/aws/common/allocator.h.html#15">aws_allocator</a> *<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, void **<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, size_t oldsize, size_t newsize) {</div><div id="211" class="line none">  211     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a> != NULL);</div><div id="212" class="line none">  212     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>-&gt;<a href="../../../include/aws/common/allocator.h.html#19">mem_realloc</a> || <a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>-&gt;<a href="../../../include/aws/common/allocator.h.html#16">mem_acquire</a>);</div><div id="213" class="line none">  213     AWS_FATAL_PRECONDITION(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>-&gt;<a href="../../../include/aws/common/allocator.h.html#17">mem_release</a>);</div><div id="214" class="line none">  214 </div><div id="215" class="line none">  215     /* Protect against https://wiki.sei.cmu.edu/confluence/display/c/MEM04-C.+Beware+of+zero-length+allocations */</div><div id="216" class="line none">  216     if (newsize == 0) {</div><div id="217" class="line none">  217         <a href="proof_allocators.c.html#201">aws_mem_release</a>(<a href="../../../include/aws/common/ring_buffer.h.html#19">allocator</a>, *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>);</div><div id="218" class="line none">  218         *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a> = NULL;</div><div id="219" class="line none">  219         return <a href="../../../include/aws/common/error.h.html#15">AWS_OP_SUCCESS</a>;</div><div id="220" class="line none">  220     }</div><div id="221" class="line none">  221 </div><div id="222" class="line none">  222     void *newptr = <a href="proof_allocators.c.html#90">can_fail_realloc</a>(*<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a>, newsize);</div><div id="223" class="line none">  223 </div><div id="224" class="line none">  224     if (!newptr) {</div><div id="225" class="line none">  225         return <a href="../../../include/aws/common/error.inl.html#17">aws_raise_error</a>(<a href="../../../include/aws/common/error.h.html#145">AWS_ERROR_OOM</a>);</div><div id="226" class="line none">  226     }</div><div id="227" class="line none">  227     *<a href="../../../include/aws/common/byte_buf.h.html#41">ptr</a> = newptr;</div><div id="228" class="line none">  228     return <a href="../../../include/aws/common/error.h.html#15">AWS_OP_SUCCESS</a>;</div><div id="229" class="line none">  229 }</div>
</div>
</body>
</html>
