
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/linked_list.inl</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef AWS_COMMON_LINKED_LIST_INL</div><div id="2" class="line none">    2 #define AWS_COMMON_LINKED_LIST_INL</div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /**</div><div id="5" class="line none">    5  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="6" class="line none">    6  * SPDX-License-Identifier: Apache-2.0.</div><div id="7" class="line none">    7  */</div><div id="8" class="line none">    8 </div><div id="9" class="line none">    9 #include &lt;aws/common/common.h&gt;</div><div id="10" class="line none">   10 #include &lt;aws/common/linked_list.h&gt;</div><div id="11" class="line none">   11 #include &lt;stddef.h&gt;</div><div id="12" class="line none">   12 </div><div id="13" class="line none">   13 AWS_EXTERN_C_BEGIN</div><div id="14" class="line none">   14 </div><div id="15" class="line none">   15 /**</div><div id="16" class="line none">   16  * Set node's next and prev pointers to NULL.</div><div id="17" class="line none">   17  */</div><div id="18" class="line none">   18 AWS_STATIC_IMPL void <a href="linked_list.inl.html#18">aws_linked_list_node_reset</a>(struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="19" class="line none">   19     AWS_PRECONDITION(node != NULL);</div><div id="20" class="line none">   20     AWS_ZERO_STRUCT(*node);</div><div id="21" class="line none">   21     AWS_POSTCONDITION(AWS_IS_ZEROED(*node));</div><div id="22" class="line none">   22 }</div><div id="23" class="line none">   23 </div><div id="24" class="line none">   24 /**</div><div id="25" class="line none">   25  * These functions need to be defined first as they are used in pre</div><div id="26" class="line none">   26  * and post conditions.</div><div id="27" class="line none">   27  */</div><div id="28" class="line none">   28 </div><div id="29" class="line none">   29 /**</div><div id="30" class="line none">   30  * Tests if the list is empty.</div><div id="31" class="line none">   31  */</div><div id="32" class="line none">   32 AWS_STATIC_IMPL bool <a href="linked_list.inl.html#32">aws_linked_list_empty</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="33" class="line none">   33     AWS_PRECONDITION(list);</div><div id="34" class="line none">   34     return list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> == &amp;list-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="35" class="line none">   35 }</div><div id="36" class="line none">   36 </div><div id="37" class="line none">   37 /**</div><div id="38" class="line none">   38  * Checks that a linked list is valid.</div><div id="39" class="line none">   39  */</div><div id="40" class="line none">   40 AWS_STATIC_IMPL bool <a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="41" class="line none">   41     if (list &amp;&amp; list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> &amp;&amp; list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#15">prev</a> == NULL &amp;&amp; list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> &amp;&amp; list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#14">next</a> == NULL) {</div><div id="42" class="line none">   42 #if (AWS_DEEP_CHECKS == 1)</div><div id="43" class="line none">   43         return <a href="linked_list.inl.html#81">aws_linked_list_is_valid_deep</a>(list);</div><div id="44" class="line none">   44 #else</div><div id="45" class="line none">   45         return true;</div><div id="46" class="line none">   46 #endif</div><div id="47" class="line none">   47     }</div><div id="48" class="line none">   48     return false;</div><div id="49" class="line none">   49 }</div><div id="50" class="line none">   50 </div><div id="51" class="line none">   51 /**</div><div id="52" class="line none">   52  * Checks that the prev of the next pointer of a node points to the</div><div id="53" class="line none">   53  * node. As this checks whether the [next] connection of a node is</div><div id="54" class="line none">   54  * bidirectional, it returns false if used for the list tail.</div><div id="55" class="line none">   55  */</div><div id="56" class="line none">   56 AWS_STATIC_IMPL bool <a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="57" class="line none">   57     return node &amp;&amp; node-&gt;<a href="linked_list.h.html#14">next</a> &amp;&amp; node-&gt;<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> == node;</div><div id="58" class="line none">   58 }</div><div id="59" class="line none">   59 </div><div id="60" class="line none">   60 /**</div><div id="61" class="line none">   61  * Checks that the next of the prev pointer of a node points to the</div><div id="62" class="line none">   62  * node. Similarly to the above, this returns false if used for the</div><div id="63" class="line none">   63  * head of a list.</div><div id="64" class="line none">   64  */</div><div id="65" class="line none">   65 AWS_STATIC_IMPL bool <a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="66" class="line none">   66     return node &amp;&amp; node-&gt;<a href="linked_list.h.html#15">prev</a> &amp;&amp; node-&gt;<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> == node;</div><div id="67" class="line none">   67 }</div><div id="68" class="line none">   68 </div><div id="69" class="line none">   69 /**</div><div id="70" class="line none">   70  * Checks that a linked list satisfies double linked list connectivity</div><div id="71" class="line none">   71  * constraints. This check is O(n) as it traverses the whole linked</div><div id="72" class="line none">   72  * list to ensure that tail is reachable from head (and vice versa)</div><div id="73" class="line none">   73  * and that every connection is bidirectional.</div><div id="74" class="line none">   74  *</div><div id="75" class="line none">   75  * Note: This check *cannot* go into an infinite loop, because we</div><div id="76" class="line none">   76  * ensure that the connection to the next node is</div><div id="77" class="line none">   77  * bidirectional. Therefore, if a node's [a] a.next is a previous node</div><div id="78" class="line none">   78  * [b] in the list, b.prev != &amp;a and so this check would fail, thus</div><div id="79" class="line none">   79  * terminating the loop.</div><div id="80" class="line none">   80  */</div><div id="81" class="line none">   81 AWS_STATIC_IMPL bool <a href="linked_list.inl.html#81">aws_linked_list_is_valid_deep</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="82" class="line none">   82     if (!list) {</div><div id="83" class="line none">   83         return false;</div><div id="84" class="line none">   84     }</div><div id="85" class="line none">   85     /* This could go into an infinite loop for a circular list */</div><div id="86" class="line none">   86     const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *temp = &amp;list-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="87" class="line none">   87     /* Head must reach tail by following next pointers */</div><div id="88" class="line none">   88     bool head_reaches_tail = false;</div><div id="89" class="line none">   89     /* By satisfying the above and that edges are bidirectional, we</div><div id="90" class="line none">   90      * also guarantee that tail reaches head by following prev</div><div id="91" class="line none">   91      * pointers */</div><div id="92" class="line none">   92     while (temp) {</div><div id="93" class="line none">   93         if (temp == &amp;list-&gt;<a href="linked_list.h.html#20">tail</a>) {</div><div id="94" class="line none">   94             head_reaches_tail = true;</div><div id="95" class="line none">   95             break;</div><div id="96" class="line none">   96         } else if (!<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(temp)) {</div><div id="97" class="line none">   97             /* Next and prev pointers should connect the same nodes */</div><div id="98" class="line none">   98             return false;</div><div id="99" class="line none">   99         }</div><div id="100" class="line none">  100         temp = temp-&gt;<a href="linked_list.h.html#14">next</a>;</div><div id="101" class="line none">  101     }</div><div id="102" class="line none">  102     return head_reaches_tail;</div><div id="103" class="line none">  103 }</div><div id="104" class="line none">  104 </div><div id="105" class="line none">  105 /**</div><div id="106" class="line none">  106  * Initializes the list. List will be empty after this call.</div><div id="107" class="line none">  107  */</div><div id="108" class="line none">  108 AWS_STATIC_IMPL void <a href="linked_list.inl.html#108">aws_linked_list_init</a>(struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="109" class="line none">  109     AWS_PRECONDITION(list);</div><div id="110" class="line none">  110     list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = &amp;list-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="111" class="line none">  111     list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#15">prev</a> = NULL;</div><div id="112" class="line none">  112     list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = &amp;list-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="113" class="line none">  113     list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#14">next</a> = NULL;</div><div id="114" class="line none">  114     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="115" class="line none">  115     AWS_POSTCONDITION(<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(list));</div><div id="116" class="line none">  116 }</div><div id="117" class="line none">  117 </div><div id="118" class="line none">  118 /**</div><div id="119" class="line none">  119  * Returns an iteration pointer for the first element in the list.</div><div id="120" class="line none">  120  */</div><div id="121" class="line none">  121 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#121">aws_linked_list_begin</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="122" class="line none">  122     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="123" class="line none">  123     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="124" class="line none">  124     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="125" class="line none">  125     AWS_POSTCONDITION(rval == list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>);</div><div id="126" class="line none">  126     return rval;</div><div id="127" class="line none">  127 }</div><div id="128" class="line none">  128 </div><div id="129" class="line none">  129 /**</div><div id="130" class="line none">  130  * Returns an iteration pointer for one past the last element in the list.</div><div id="131" class="line none">  131  */</div><div id="132" class="line none">  132 AWS_STATIC_IMPL const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#132">aws_linked_list_end</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="133" class="line none">  133     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="134" class="line none">  134     const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = &amp;list-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="135" class="line none">  135     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="136" class="line none">  136     AWS_POSTCONDITION(rval == &amp;list-&gt;<a href="linked_list.h.html#20">tail</a>);</div><div id="137" class="line none">  137     return rval;</div><div id="138" class="line none">  138 }</div><div id="139" class="line none">  139 </div><div id="140" class="line none">  140 /**</div><div id="141" class="line none">  141  * Returns a pointer for the last element in the list.</div><div id="142" class="line none">  142  * Used to begin iterating the list in reverse. Ex:</div><div id="143" class="line none">  143  *   for (i = aws_linked_list_rbegin(list); i != aws_linked_list_rend(list); i = aws_linked_list_prev(i)) {...}</div><div id="144" class="line none">  144  */</div><div id="145" class="line none">  145 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#145">aws_linked_list_rbegin</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="146" class="line none">  146     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="147" class="line none">  147     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="148" class="line none">  148     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="149" class="line none">  149     AWS_POSTCONDITION(rval == list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>);</div><div id="150" class="line none">  150     return rval;</div><div id="151" class="line none">  151 }</div><div id="152" class="line none">  152 </div><div id="153" class="line none">  153 /**</div><div id="154" class="line none">  154  * Returns the pointer to one before the first element in the list.</div><div id="155" class="line none">  155  * Used to end iterating the list in reverse.</div><div id="156" class="line none">  156  */</div><div id="157" class="line none">  157 AWS_STATIC_IMPL const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#157">aws_linked_list_rend</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="158" class="line none">  158     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="159" class="line none">  159     const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = &amp;list-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="160" class="line none">  160     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="161" class="line none">  161     AWS_POSTCONDITION(rval == &amp;list-&gt;<a href="linked_list.h.html#19">head</a>);</div><div id="162" class="line none">  162     return rval;</div><div id="163" class="line none">  163 }</div><div id="164" class="line none">  164 </div><div id="165" class="line none">  165 /**</div><div id="166" class="line none">  166  * Returns the next element in the list.</div><div id="167" class="line none">  167  */</div><div id="168" class="line none">  168 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#168">aws_linked_list_next</a>(const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="169" class="line none">  169     AWS_PRECONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(node));</div><div id="170" class="line none">  170     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = node-&gt;<a href="linked_list.h.html#14">next</a>;</div><div id="171" class="line none">  171     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(node));</div><div id="172" class="line none">  172     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(rval));</div><div id="173" class="line none">  173     AWS_POSTCONDITION(rval == node-&gt;<a href="linked_list.h.html#14">next</a>);</div><div id="174" class="line none">  174     return rval;</div><div id="175" class="line none">  175 }</div><div id="176" class="line none">  176 </div><div id="177" class="line none">  177 /**</div><div id="178" class="line none">  178  * Returns the previous element in the list.</div><div id="179" class="line none">  179  */</div><div id="180" class="line none">  180 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#180">aws_linked_list_prev</a>(const struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="181" class="line none">  181     AWS_PRECONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(node));</div><div id="182" class="line none">  182     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = node-&gt;<a href="linked_list.h.html#15">prev</a>;</div><div id="183" class="line none">  183     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(node));</div><div id="184" class="line none">  184     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(rval));</div><div id="185" class="line none">  185     AWS_POSTCONDITION(rval == node-&gt;<a href="linked_list.h.html#15">prev</a>);</div><div id="186" class="line none">  186     return rval;</div><div id="187" class="line none">  187 }</div><div id="188" class="line none">  188 </div><div id="189" class="line none">  189 /**</div><div id="190" class="line none">  190  * Inserts to_add immediately after after.</div><div id="191" class="line none">  191  */</div><div id="192" class="line none">  192 AWS_STATIC_IMPL void <a href="linked_list.inl.html#192">aws_linked_list_insert_after</a>(</div><div id="193" class="line none">  193     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *after,</div><div id="194" class="line none">  194     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *to_add) {</div><div id="195" class="line none">  195     AWS_PRECONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(after));</div><div id="196" class="line none">  196     AWS_PRECONDITION(to_add != NULL);</div><div id="197" class="line none">  197     to_add-&gt;<a href="linked_list.h.html#15">prev</a> = after;</div><div id="198" class="line none">  198     to_add-&gt;<a href="linked_list.h.html#14">next</a> = after-&gt;<a href="linked_list.h.html#14">next</a>;</div><div id="199" class="line none">  199     after-&gt;<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = to_add;</div><div id="200" class="line none">  200     after-&gt;<a href="linked_list.h.html#14">next</a> = to_add;</div><div id="201" class="line none">  201     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(after));</div><div id="202" class="line none">  202     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(to_add));</div><div id="203" class="line none">  203     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(to_add));</div><div id="204" class="line none">  204     AWS_POSTCONDITION(after-&gt;<a href="linked_list.h.html#14">next</a> == to_add);</div><div id="205" class="line none">  205 }</div><div id="206" class="line none">  206 </div><div id="207" class="line none">  207 /**</div><div id="208" class="line none">  208  * Swaps the order two nodes in the linked list.</div><div id="209" class="line none">  209  */</div><div id="210" class="line none">  210 AWS_STATIC_IMPL void <a href="linked_list.inl.html#210">aws_linked_list_swap_nodes</a>(struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *a, struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *b) {</div><div id="211" class="line none">  211     AWS_PRECONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(a));</div><div id="212" class="line none">  212     AWS_PRECONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(a));</div><div id="213" class="line none">  213     AWS_PRECONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(b));</div><div id="214" class="line none">  214     AWS_PRECONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(b));</div><div id="215" class="line none">  215 </div><div id="216" class="line none">  216     if (a == b) {</div><div id="217" class="line none">  217         return;</div><div id="218" class="line none">  218     }</div><div id="219" class="line none">  219 </div><div id="220" class="line none">  220     /* snapshot b's value to avoid clobbering its next/prev pointers if a/b are adjacent */</div><div id="221" class="line none">  221     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> tmp = *b;</div><div id="222" class="line none">  222     a-&gt;<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = b;</div><div id="223" class="line none">  223     a-&gt;<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = b;</div><div id="224" class="line none">  224 </div><div id="225" class="line none">  225     tmp.<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = a;</div><div id="226" class="line none">  226     tmp.<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = a;</div><div id="227" class="line none">  227 </div><div id="228" class="line none">  228     tmp = *a;</div><div id="229" class="line none">  229     *a = *b;</div><div id="230" class="line none">  230     *b = tmp;</div><div id="231" class="line none">  231 </div><div id="232" class="line none">  232     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(a));</div><div id="233" class="line none">  233     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(a));</div><div id="234" class="line none">  234     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(b));</div><div id="235" class="line none">  235     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(b));</div><div id="236" class="line none">  236 }</div><div id="237" class="line none">  237 </div><div id="238" class="line none">  238 /**</div><div id="239" class="line none">  239  * Inserts to_add immediately before before.</div><div id="240" class="line none">  240  */</div><div id="241" class="line none">  241 AWS_STATIC_IMPL void <a href="linked_list.inl.html#241">aws_linked_list_insert_before</a>(</div><div id="242" class="line none">  242     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *before,</div><div id="243" class="line none">  243     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *to_add) {</div><div id="244" class="line none">  244     AWS_PRECONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(before));</div><div id="245" class="line none">  245     AWS_PRECONDITION(to_add != NULL);</div><div id="246" class="line none">  246     to_add-&gt;<a href="linked_list.h.html#14">next</a> = before;</div><div id="247" class="line none">  247     to_add-&gt;<a href="linked_list.h.html#15">prev</a> = before-&gt;<a href="linked_list.h.html#15">prev</a>;</div><div id="248" class="line none">  248     before-&gt;<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = to_add;</div><div id="249" class="line none">  249     before-&gt;<a href="linked_list.h.html#15">prev</a> = to_add;</div><div id="250" class="line none">  250     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(before));</div><div id="251" class="line none">  251     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(to_add));</div><div id="252" class="line none">  252     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(to_add));</div><div id="253" class="line none">  253     AWS_POSTCONDITION(before-&gt;<a href="linked_list.h.html#15">prev</a> == to_add);</div><div id="254" class="line none">  254 }</div><div id="255" class="line none">  255 </div><div id="256" class="line none">  256 /**</div><div id="257" class="line none">  257  * Removes the specified node from the list (prev/next point to each other) and</div><div id="258" class="line none">  258  * returns the next node in the list.</div><div id="259" class="line none">  259  */</div><div id="260" class="line none">  260 AWS_STATIC_IMPL void <a href="linked_list.inl.html#260">aws_linked_list_remove</a>(struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="261" class="line none">  261     AWS_PRECONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(node));</div><div id="262" class="line none">  262     AWS_PRECONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(node));</div><div id="263" class="line none">  263     node-&gt;<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = node-&gt;<a href="linked_list.h.html#14">next</a>;</div><div id="264" class="line none">  264     node-&gt;<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = node-&gt;<a href="linked_list.h.html#15">prev</a>;</div><div id="265" class="line none">  265     <a href="linked_list.inl.html#18">aws_linked_list_node_reset</a>(node);</div><div id="266" class="line none">  266     AWS_POSTCONDITION(node-&gt;<a href="linked_list.h.html#14">next</a> == NULL &amp;&amp; node-&gt;<a href="linked_list.h.html#15">prev</a> == NULL);</div><div id="267" class="line none">  267 }</div><div id="268" class="line none">  268 </div><div id="269" class="line none">  269 /**</div><div id="270" class="line none">  270  * Append new_node.</div><div id="271" class="line none">  271  */</div><div id="272" class="line none">  272 AWS_STATIC_IMPL void <a href="linked_list.inl.html#272">aws_linked_list_push_back</a>(struct <a href="linked_list.h.html#18">aws_linked_list</a> *list, struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="273" class="line none">  273     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="274" class="line none">  274     AWS_PRECONDITION(node != NULL);</div><div id="275" class="line none">  275     <a href="linked_list.inl.html#241">aws_linked_list_insert_before</a>(&amp;list-&gt;<a href="linked_list.h.html#20">tail</a>, node);</div><div id="276" class="line none">  276     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="277" class="line none">  277     AWS_POSTCONDITION(list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> == node, "[node] is the new last element of [list]");</div><div id="278" class="line none">  278 }</div><div id="279" class="line none">  279 </div><div id="280" class="line none">  280 /**</div><div id="281" class="line none">  281  * Returns the element in the back of the list.</div><div id="282" class="line none">  282  */</div><div id="283" class="line none">  283 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#283">aws_linked_list_back</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="284" class="line none">  284     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="285" class="line none">  285     AWS_PRECONDITION(!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(list));</div><div id="286" class="line none">  286     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = list-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="287" class="line none">  287     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="288" class="line none">  288     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(rval));</div><div id="289" class="line none">  289     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(rval));</div><div id="290" class="line none">  290     return rval;</div><div id="291" class="line none">  291 }</div><div id="292" class="line none">  292 </div><div id="293" class="line none">  293 /**</div><div id="294" class="line none">  294  * Returns the element in the back of the list and removes it</div><div id="295" class="line none">  295  */</div><div id="296" class="line none">  296 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#296">aws_linked_list_pop_back</a>(struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="297" class="line none">  297     AWS_PRECONDITION(!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(list));</div><div id="298" class="line none">  298     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="299" class="line none">  299     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *back = <a href="linked_list.inl.html#283">aws_linked_list_back</a>(list);</div><div id="300" class="line none">  300     <a href="linked_list.inl.html#260">aws_linked_list_remove</a>(back);</div><div id="301" class="line none">  301     AWS_POSTCONDITION(back-&gt;<a href="linked_list.h.html#14">next</a> == NULL &amp;&amp; back-&gt;<a href="linked_list.h.html#15">prev</a> == NULL);</div><div id="302" class="line none">  302     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="303" class="line none">  303     return back;</div><div id="304" class="line none">  304 }</div><div id="305" class="line none">  305 </div><div id="306" class="line none">  306 /**</div><div id="307" class="line none">  307  * Prepend new_node.</div><div id="308" class="line none">  308  */</div><div id="309" class="line none">  309 AWS_STATIC_IMPL void <a href="linked_list.inl.html#309">aws_linked_list_push_front</a>(struct <a href="linked_list.h.html#18">aws_linked_list</a> *list, struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *node) {</div><div id="310" class="line none">  310     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="311" class="line none">  311     AWS_PRECONDITION(node != NULL);</div><div id="312" class="line none">  312     <a href="linked_list.inl.html#241">aws_linked_list_insert_before</a>(list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>, node);</div><div id="313" class="line none">  313     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="314" class="line none">  314     AWS_POSTCONDITION(list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> == node, "[node] is the new first element of [list]");</div><div id="315" class="line none">  315 }</div><div id="316" class="line none">  316 </div><div id="317" class="line none">  317 /**</div><div id="318" class="line none">  318  * Returns the element in the front of the list.</div><div id="319" class="line none">  319  */</div><div id="320" class="line none">  320 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#320">aws_linked_list_front</a>(const struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="321" class="line none">  321     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="322" class="line none">  322     AWS_PRECONDITION(!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(list));</div><div id="323" class="line none">  323     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *rval = list-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="324" class="line none">  324     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="325" class="line none">  325     AWS_POSTCONDITION(<a href="linked_list.inl.html#65">aws_linked_list_node_prev_is_valid</a>(rval));</div><div id="326" class="line none">  326     AWS_POSTCONDITION(<a href="linked_list.inl.html#56">aws_linked_list_node_next_is_valid</a>(rval));</div><div id="327" class="line none">  327     return rval;</div><div id="328" class="line none">  328 }</div><div id="329" class="line none">  329 </div><div id="330" class="line none">  330 /**</div><div id="331" class="line none">  331  * Returns the element in the front of the list and removes it</div><div id="332" class="line none">  332  */</div><div id="333" class="line none">  333 AWS_STATIC_IMPL struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *<a href="linked_list.inl.html#333">aws_linked_list_pop_front</a>(struct <a href="linked_list.h.html#18">aws_linked_list</a> *list) {</div><div id="334" class="line none">  334     AWS_PRECONDITION(!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(list));</div><div id="335" class="line none">  335     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="336" class="line none">  336     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *front = <a href="linked_list.inl.html#320">aws_linked_list_front</a>(list);</div><div id="337" class="line none">  337     <a href="linked_list.inl.html#260">aws_linked_list_remove</a>(front);</div><div id="338" class="line none">  338     AWS_POSTCONDITION(front-&gt;<a href="linked_list.h.html#14">next</a> == NULL &amp;&amp; front-&gt;<a href="linked_list.h.html#15">prev</a> == NULL);</div><div id="339" class="line none">  339     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(list));</div><div id="340" class="line none">  340     return front;</div><div id="341" class="line none">  341 }</div><div id="342" class="line none">  342 </div><div id="343" class="line none">  343 AWS_STATIC_IMPL void <a href="linked_list.inl.html#343">aws_linked_list_swap_contents</a>(</div><div id="344" class="line none">  344     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT a,</div><div id="345" class="line none">  345     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT b) {</div><div id="346" class="line none">  346 </div><div id="347" class="line none">  347     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(a));</div><div id="348" class="line none">  348     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(b));</div><div id="349" class="line none">  349     AWS_PRECONDITION(a != b);</div><div id="350" class="line none">  350     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *a_first = a-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="351" class="line none">  351     struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *a_last = a-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="352" class="line none">  352 </div><div id="353" class="line none">  353     /* Move B's contents into A */</div><div id="354" class="line none">  354     if (<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(b)) {</div><div id="355" class="line none">  355         <a href="linked_list.inl.html#108">aws_linked_list_init</a>(a);</div><div id="356" class="line none">  356     } else {</div><div id="357" class="line none">  357         a-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = b-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="358" class="line none">  358         a-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = &amp;a-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="359" class="line none">  359         a-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = b-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="360" class="line none">  360         a-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = &amp;a-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="361" class="line none">  361     }</div><div id="362" class="line none">  362 </div><div id="363" class="line none">  363     /* Move A's old contents into B */</div><div id="364" class="line none">  364     if (a_first == &amp;a-&gt;<a href="linked_list.h.html#20">tail</a>) {</div><div id="365" class="line none">  365         <a href="linked_list.inl.html#108">aws_linked_list_init</a>(b);</div><div id="366" class="line none">  366     } else {</div><div id="367" class="line none">  367         b-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = a_first;</div><div id="368" class="line none">  368         b-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>-&gt;<a href="linked_list.h.html#15">prev</a> = &amp;b-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="369" class="line none">  369         b-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = a_last;</div><div id="370" class="line none">  370         b-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>-&gt;<a href="linked_list.h.html#14">next</a> = &amp;b-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="371" class="line none">  371     }</div><div id="372" class="line none">  372     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(a));</div><div id="373" class="line none">  373     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(b));</div><div id="374" class="line none">  374 }</div><div id="375" class="line none">  375 </div><div id="376" class="line none">  376 AWS_STATIC_IMPL void <a href="linked_list.inl.html#376">aws_linked_list_move_all_back</a>(</div><div id="377" class="line none">  377     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT dst,</div><div id="378" class="line none">  378     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT src) {</div><div id="379" class="line none">  379 </div><div id="380" class="line none">  380     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(src));</div><div id="381" class="line none">  381     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(dst));</div><div id="382" class="line none">  382     AWS_PRECONDITION(dst != src);</div><div id="383" class="line none">  383 </div><div id="384" class="line none">  384     if (!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(src)) {</div><div id="385" class="line none">  385         /* splice src nodes into dst, between the back and tail nodes */</div><div id="386" class="line none">  386         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *dst_back = dst-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="387" class="line none">  387         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *src_front = src-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="388" class="line none">  388         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *src_back = src-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="389" class="line none">  389 </div><div id="390" class="line none">  390         dst_back-&gt;<a href="linked_list.h.html#14">next</a> = src_front;</div><div id="391" class="line none">  391         src_front-&gt;<a href="linked_list.h.html#15">prev</a> = dst_back;</div><div id="392" class="line none">  392 </div><div id="393" class="line none">  393         dst-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = src_back;</div><div id="394" class="line none">  394         src_back-&gt;<a href="linked_list.h.html#14">next</a> = &amp;dst-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="395" class="line none">  395 </div><div id="396" class="line none">  396         /* reset src */</div><div id="397" class="line none">  397         src-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = &amp;src-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="398" class="line none">  398         src-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = &amp;src-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="399" class="line none">  399     }</div><div id="400" class="line none">  400 </div><div id="401" class="line none">  401     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(src));</div><div id="402" class="line none">  402     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(dst));</div><div id="403" class="line none">  403 }</div><div id="404" class="line none">  404 </div><div id="405" class="line none">  405 AWS_STATIC_IMPL void <a href="linked_list.inl.html#405">aws_linked_list_move_all_front</a>(</div><div id="406" class="line none">  406     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT dst,</div><div id="407" class="line none">  407     struct <a href="linked_list.h.html#18">aws_linked_list</a> *AWS_RESTRICT src) {</div><div id="408" class="line none">  408 </div><div id="409" class="line none">  409     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(src));</div><div id="410" class="line none">  410     AWS_PRECONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(dst));</div><div id="411" class="line none">  411     AWS_PRECONDITION(dst != src);</div><div id="412" class="line none">  412 </div><div id="413" class="line none">  413     if (!<a href="linked_list.inl.html#32">aws_linked_list_empty</a>(src)) {</div><div id="414" class="line none">  414         /* splice src nodes into dst, between the head and front nodes */</div><div id="415" class="line none">  415         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *dst_front = dst-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="416" class="line none">  416         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *src_front = src-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a>;</div><div id="417" class="line none">  417         struct <a href="linked_list.h.html#13">aws_linked_list_node</a> *src_back = src-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a>;</div><div id="418" class="line none">  418 </div><div id="419" class="line none">  419         dst-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = src_front;</div><div id="420" class="line none">  420         src_front-&gt;<a href="linked_list.h.html#15">prev</a> = &amp;dst-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="421" class="line none">  421 </div><div id="422" class="line none">  422         src_back-&gt;<a href="linked_list.h.html#14">next</a> = dst_front;</div><div id="423" class="line none">  423         dst_front-&gt;<a href="linked_list.h.html#15">prev</a> = src_back;</div><div id="424" class="line none">  424 </div><div id="425" class="line none">  425         /* reset src */</div><div id="426" class="line none">  426         src-&gt;<a href="linked_list.h.html#19">head</a>.<a href="linked_list.h.html#14">next</a> = &amp;src-&gt;<a href="linked_list.h.html#20">tail</a>;</div><div id="427" class="line none">  427         src-&gt;<a href="linked_list.h.html#20">tail</a>.<a href="linked_list.h.html#15">prev</a> = &amp;src-&gt;<a href="linked_list.h.html#19">head</a>;</div><div id="428" class="line none">  428     }</div><div id="429" class="line none">  429 </div><div id="430" class="line none">  430     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(src));</div><div id="431" class="line none">  431     AWS_POSTCONDITION(<a href="linked_list.inl.html#40">aws_linked_list_is_valid</a>(dst));</div><div id="432" class="line none">  432 }</div><div id="433" class="line none">  433 </div><div id="434" class="line none">  434 AWS_EXTERN_C_END</div><div id="435" class="line none">  435 </div><div id="436" class="line none">  436 #endif /* AWS_COMMON_LINKED_LIST_INL */</div>
</div>
</body>
</html>
