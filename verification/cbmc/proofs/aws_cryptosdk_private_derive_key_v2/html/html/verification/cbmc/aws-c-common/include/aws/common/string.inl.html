
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/string.inl</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef AWS_COMMON_STRING_INL</div><div id="2" class="line none">    2 #define AWS_COMMON_STRING_INL</div><div id="3" class="line none">    3 /**</div><div id="4" class="line none">    4  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="5" class="line none">    5  * SPDX-License-Identifier: Apache-2.0.</div><div id="6" class="line none">    6  */</div><div id="7" class="line none">    7 #include &lt;aws/common/string.h&gt;</div><div id="8" class="line none">    8 #include &lt;ctype.h&gt;</div><div id="9" class="line none">    9 </div><div id="10" class="line none">   10 AWS_EXTERN_C_BEGIN</div><div id="11" class="line none">   11 /**</div><div id="12" class="line none">   12  * Equivalent to str-&gt;bytes.</div><div id="13" class="line none">   13  */</div><div id="14" class="line none">   14 AWS_STATIC_IMPL</div><div id="15" class="line none">   15 const uint8_t *<a href="string.inl.html#15">aws_string_bytes</a>(const struct <a href="string.h.html#41">aws_string</a> *str) {</div><div id="16" class="line none">   16     AWS_PRECONDITION(<a href="string.inl.html#34">aws_string_is_valid</a>(str));</div><div id="17" class="line none">   17     return str-&gt;<a href="string.h.html#45">bytes</a>;</div><div id="18" class="line none">   18 }</div><div id="19" class="line none">   19 </div><div id="20" class="line none">   20 /**</div><div id="21" class="line none">   21  * Equivalent to `(const char *)str-&gt;bytes`.</div><div id="22" class="line none">   22  */</div><div id="23" class="line none">   23 AWS_STATIC_IMPL</div><div id="24" class="line none">   24 const char *<a href="string.inl.html#24">aws_string_c_str</a>(const struct <a href="string.h.html#41">aws_string</a> *str) {</div><div id="25" class="line none">   25     AWS_PRECONDITION(<a href="string.inl.html#34">aws_string_is_valid</a>(str));</div><div id="26" class="line none">   26     return (const char *)str-&gt;<a href="string.h.html#45">bytes</a>;</div><div id="27" class="line none">   27 }</div><div id="28" class="line none">   28 </div><div id="29" class="line none">   29 /**</div><div id="30" class="line none">   30  * Evaluates the set of properties that define the shape of all valid aws_string structures.</div><div id="31" class="line none">   31  * It is also a cheap check, in the sense it run in constant time (i.e., no loops or recursion).</div><div id="32" class="line none">   32  */</div><div id="33" class="line none">   33 AWS_STATIC_IMPL</div><div id="34" class="line none">   34 bool <a href="string.inl.html#34">aws_string_is_valid</a>(const struct <a href="string.h.html#41">aws_string</a> *str) {</div><div id="35" class="line none">   35     return str &amp;&amp; AWS_MEM_IS_READABLE(&amp;str-&gt;<a href="string.h.html#45">bytes</a>[0], str-&gt;<a href="byte_buf.h.html#27">len</a> + 1) &amp;&amp; str-&gt;<a href="string.h.html#45">bytes</a>[str-&gt;<a href="byte_buf.h.html#27">len</a>] == 0;</div><div id="36" class="line none">   36 }</div><div id="37" class="line none">   37 </div><div id="38" class="line none">   38 /**</div><div id="39" class="line none">   39  * Best-effort checks aws_string invariants, when the str-&gt;len is unknown</div><div id="40" class="line none">   40  */</div><div id="41" class="line none">   41 AWS_STATIC_IMPL</div><div id="42" class="line none">   42 bool <a href="string.inl.html#42">aws_c_string_is_valid</a>(const char *str) {</div><div id="43" class="line none">   43     /* Knowing the actual length to check would require strlen(), which is</div><div id="44" class="line none">   44      * a) linear time in the length of the string</div><div id="45" class="line none">   45      * b) could already cause a memory violation for a non-zero-terminated string.</div><div id="46" class="line none">   46      * But we know that a c-string must have at least one character, to store the null terminator</div><div id="47" class="line none">   47      */</div><div id="48" class="line none">   48     return str &amp;&amp; AWS_MEM_IS_READABLE(str, 1);</div><div id="49" class="line none">   49 }</div><div id="50" class="line none">   50 </div><div id="51" class="line none">   51 /**</div><div id="52" class="line none">   52  * Evaluates if a char is a white character.</div><div id="53" class="line none">   53  */</div><div id="54" class="line none">   54 AWS_STATIC_IMPL</div><div id="55" class="line none">   55 bool <a href="string.inl.html#55">aws_char_is_space</a>(uint8_t c) {</div><div id="56" class="line none">   56     return <a href="../../../source/byte_buf.c.html#1610">aws_isspace</a>(c);</div><div id="57" class="line none">   57 }</div><div id="58" class="line none">   58 </div><div id="59" class="line none">   59 AWS_EXTERN_C_END</div><div id="60" class="line none">   60 #endif /* AWS_COMMON_STRING_INL */</div>
</div>
</body>
</html>
