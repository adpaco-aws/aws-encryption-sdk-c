
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/private/hash_table_impl.h</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef <a href="hash_table_impl.h.html#2">AWS_COMMON_PRIVATE_HASH_TABLE_IMPL_H</a></div><div id="2" class="line none">    2 #define <a href="hash_table_impl.h.html#2">AWS_COMMON_PRIVATE_HASH_TABLE_IMPL_H</a></div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /**</div><div id="5" class="line none">    5  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="6" class="line none">    6  * SPDX-License-Identifier: Apache-2.0.</div><div id="7" class="line none">    7  */</div><div id="8" class="line none">    8 </div><div id="9" class="line none">    9 #include &lt;aws/common/common.h&gt;</div><div id="10" class="line none">   10 #include &lt;aws/common/hash_table.h&gt;</div><div id="11" class="line none">   11 #include &lt;aws/common/math.h&gt;</div><div id="12" class="line none">   12 </div><div id="13" class="line none">   13 struct <a href="hash_table_impl.h.html#13">hash_table_entry</a> {</div><div id="14" class="line none">   14     struct <a href="../hash_table.h.html#63">aws_hash_element</a> <a href="hash_table_impl.h.html#14">element</a>;</div><div id="15" class="line none">   15     uint64_t <a href="hash_table_impl.h.html#15">hash_code</a>; /* hash code (0 signals empty) */</div><div id="16" class="line none">   16 };</div><div id="17" class="line none">   17 </div><div id="18" class="line none">   18 /* Using a flexible array member is the C99 compliant way to have the hash_table_entries</div><div id="19" class="line none">   19  * immediatly follow the struct.</div><div id="20" class="line none">   20  *</div><div id="21" class="line none">   21  * MSVC doesn't know this for some reason so we need to use a pragma to make</div><div id="22" class="line none">   22  * it happy.</div><div id="23" class="line none">   23  */</div><div id="24" class="line none">   24 #ifdef _MSC_VER</div><div id="25" class="line none">   25 #    pragma warning(push)</div><div id="26" class="line none">   26 #    pragma warning(disable : 4200)</div><div id="27" class="line none">   27 #endif</div><div id="28" class="line none">   28 struct <a href="../hash_table.h.html#47">hash_table_state</a> {</div><div id="29" class="line none">   29     <a href="../hash_table.h.html#92">aws_hash_fn</a> *<a href="hash_table_impl.h.html#29">hash_fn</a>;</div><div id="30" class="line none">   30     <a href="../hash_table.h.html#104">aws_hash_callback_eq_fn</a> *<a href="hash_table_impl.h.html#30">equals_fn</a>;</div><div id="31" class="line none">   31     <a href="../hash_table.h.html#116">aws_hash_callback_destroy_fn</a> *<a href="hash_table_impl.h.html#31">destroy_key_fn</a>;</div><div id="32" class="line none">   32     <a href="../hash_table.h.html#116">aws_hash_callback_destroy_fn</a> *<a href="hash_table_impl.h.html#32">destroy_value_fn</a>;</div><div id="33" class="line none">   33     struct <a href="../allocator.h.html#15">aws_allocator</a> *<a href="../array_list.h.html#16">alloc</a>;</div><div id="34" class="line none">   34 </div><div id="35" class="line none">   35     size_t <a href="hash_table_impl.h.html#35">size</a>, <a href="hash_table_impl.h.html#35">entry_count</a>;</div><div id="36" class="line none">   36     size_t <a href="hash_table_impl.h.html#36">max_load</a>;</div><div id="37" class="line none">   37     /* We AND a hash value with mask to get the slot index */</div><div id="38" class="line none">   38     size_t <a href="hash_table_impl.h.html#38">mask</a>;</div><div id="39" class="line none">   39     double <a href="hash_table_impl.h.html#39">max_load_factor</a>;</div><div id="40" class="line none">   40     /* actually variable length */</div><div id="41" class="line none">   41     struct <a href="hash_table_impl.h.html#13">hash_table_entry</a> <a href="hash_table_impl.h.html#41">slots</a>[];</div><div id="42" class="line none">   42 };</div><div id="43" class="line none">   43 #ifdef _MSC_VER</div><div id="44" class="line none">   44 #    pragma warning(pop)</div><div id="45" class="line none">   45 #endif</div><div id="46" class="line none">   46 </div><div id="47" class="line none">   47 /**</div><div id="48" class="line none">   48  * Best-effort check of hash_table_state data-structure invariants</div><div id="49" class="line none">   49  * Some invariants, such as that the number of entries is actually the</div><div id="50" class="line none">   50  * same as the entry_count field, would require a loop to check</div><div id="51" class="line none">   51  */</div><div id="52" class="line none">   52 bool hash_table_state_is_valid(const struct <a href="../hash_table.h.html#47">hash_table_state</a> *<a href="../hash_table.h.html#75">map</a>);</div><div id="53" class="line none">   53 </div><div id="54" class="line none">   54 /**</div><div id="55" class="line none">   55  * Determine the total number of bytes needed for a hash-table with</div><div id="56" class="line none">   56  * "size" slots. If the result would overflow a size_t, return</div><div id="57" class="line none">   57  * AWS_OP_ERR; otherwise, return AWS_OP_SUCCESS with the result in</div><div id="58" class="line none">   58  * "required_bytes".</div><div id="59" class="line none">   59  */</div><div id="60" class="line none">   60 int <a href="hash_table_impl.h.html#60">hash_table_state_required_bytes</a>(size_t <a href="hash_table_impl.h.html#35">size</a>, size_t *required_bytes);</div><div id="61" class="line none">   61 </div><div id="62" class="line none">   62 #endif /* AWS_COMMON_PRIVATE_HASH_TABLE_IMPL_H */</div>
</div>
</body>
</html>
