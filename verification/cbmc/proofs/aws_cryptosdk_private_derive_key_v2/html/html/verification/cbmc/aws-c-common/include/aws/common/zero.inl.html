
<html>
<head>
<title>verification/cbmc/aws-c-common/include/aws/common/zero.inl</title>
<link rel="stylesheet" type="text/css" href="../../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 #ifndef AWS_COMMON_ZERO_INL</div><div id="2" class="line none">    2 #define AWS_COMMON_ZERO_INL</div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /**</div><div id="5" class="line none">    5  * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.</div><div id="6" class="line none">    6  * SPDX-License-Identifier: Apache-2.0.</div><div id="7" class="line none">    7  */</div><div id="8" class="line none">    8 </div><div id="9" class="line none">    9 #include &lt;aws/common/stdbool.h&gt;</div><div id="10" class="line none">   10 #include &lt;aws/common/stdint.h&gt;</div><div id="11" class="line none">   11 #include &lt;aws/common/zero.h&gt;</div><div id="12" class="line none">   12 #include &lt;string.h&gt;</div><div id="13" class="line none">   13 </div><div id="14" class="line none">   14 AWS_EXTERN_C_BEGIN</div><div id="15" class="line none">   15 /**</div><div id="16" class="line none">   16  * Returns whether each byte is zero.</div><div id="17" class="line none">   17  */</div><div id="18" class="line none">   18 AWS_STATIC_IMPL</div><div id="19" class="line none">   19 bool <a href="zero.inl.html#19">aws_is_mem_zeroed</a>(const void *buf, size_t bufsize) {</div><div id="20" class="line none">   20     /* Optimization idea: vectorized instructions to check more than 64 bits at a time. */</div><div id="21" class="line none">   21 </div><div id="22" class="line none">   22     /* Check 64 bits at a time */</div><div id="23" class="line none">   23     const uint64_t *buf_u64 = (const uint64_t *)buf;</div><div id="24" class="line none">   24     const size_t num_u64_checks = bufsize / 8;</div><div id="25" class="line none">   25     size_t i;</div><div id="26" class="line none">   26     for (i = 0; i &lt; num_u64_checks; ++i) {</div><div id="27" class="line none">   27         if (buf_u64[i]) {</div><div id="28" class="line none">   28             return false;</div><div id="29" class="line none">   29         }</div><div id="30" class="line none">   30     }</div><div id="31" class="line none">   31 </div><div id="32" class="line none">   32     /* Update buf to where u64 checks left off */</div><div id="33" class="line none">   33     buf = buf_u64 + num_u64_checks;</div><div id="34" class="line none">   34     bufsize = bufsize % 8;</div><div id="35" class="line none">   35 </div><div id="36" class="line none">   36     /* Check 8 bits at a time */</div><div id="37" class="line none">   37     const uint8_t *buf_u8 = (const uint8_t *)buf;</div><div id="38" class="line none">   38     for (i = 0; i &lt; bufsize; ++i) {</div><div id="39" class="line none">   39         if (buf_u8[i]) {</div><div id="40" class="line none">   40             return false;</div><div id="41" class="line none">   41         }</div><div id="42" class="line none">   42     }</div><div id="43" class="line none">   43 </div><div id="44" class="line none">   44     return true;</div><div id="45" class="line none">   45 }</div><div id="46" class="line none">   46 </div><div id="47" class="line none">   47 AWS_EXTERN_C_END</div><div id="48" class="line none">   48 </div><div id="49" class="line none">   49 #endif /* AWS_COMMON_ZERO_INL */</div>
</div>
</body>
</html>
